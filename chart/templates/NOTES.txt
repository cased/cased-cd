╔════════════════════════════════════════════════════════════════════╗
║                                                                    ║
║                    Cased CD Successfully Installed!                ║
║                                                                    ║
║                A modern, beautiful UI for ArgoCD                   ║
║                        Built by Cased                              ║
║                                                                    ║
╚════════════════════════════════════════════════════════════════════╝

1. Get the application URL:
{{- if .Values.ingress.enabled }}
{{- range $host := .Values.ingress.hosts }}
  {{- range .paths }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
{{- else if contains "NodePort" .Values.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "cased-cd.fullname" . }})
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
{{- else if contains "LoadBalancer" .Values.service.type }}
     NOTE: It may take a few minutes for the LoadBalancer IP to be available.
           You can watch the status of by running 'kubectl get --namespace {{ .Release.Namespace }} svc -w {{ include "cased-cd.fullname" . }}'
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "cased-cd.fullname" . }} --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")
  echo http://$SERVICE_IP:{{ .Values.service.port }}
{{- else if contains "ClusterIP" .Values.service.type }}
  export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "cased-cd.name" . }},app.kubernetes.io/instance={{ .Release.Name }}" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace {{ .Release.Namespace }} $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use Cased CD"
  kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 8080:$CONTAINER_PORT
{{- end }}

2. Default login credentials for ArgoCD:
   Username: admin
   Password: (retrieve from ArgoCD server)

   kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d

3. Configuration:
   ArgoCD Server: {{ .Values.argocd.server }}

{{- if .Values.enterprise.enabled }}

4. Enterprise Features Enabled:
   - RBAC Management
   {{- if .Values.enterprise.auditTrail.enabled }}
   - Audit Trail (PersistentVolume)
   {{- else }}
   - Audit Trail (stdout only, no PVC)
   {{- end }}
   - User Management
   - Notification Services

   {{- if .Values.enterprise.auditTrail.enabled }}
   Check audit PVC status:
   kubectl get pvc -n {{ .Release.Namespace }} {{ include "cased-cd.fullname" . }}-enterprise-audit

   ⚠️  If PVC is stuck in Pending state:

   Check if a default storage class exists:
   kubectl get storageclass

   If no storage class is marked (default), you must set one explicitly:
   helm upgrade {{ .Release.Name }} cased/cased-cd \
     --namespace {{ .Release.Namespace }} \
     --reuse-values \
     --set enterprise.persistence.storageClass=<storage-class-name>

   Common storage classes:
   - AWS EKS: gp2, gp3
   - Google GKE: standard, standard-rwo
   - Azure AKS: default, managed-premium
   - k3d/k3s: local-path

   To disable persistent audit logging (no PVC required):
   --set enterprise.auditTrail.enabled=false
   {{- else }}

   Note: Persistent audit logging is disabled. Audit events are logged to stdout only.
   To enable persistent audit logging with PVC:
   --set enterprise.auditTrail.enabled=true
   {{- end }}

5. Learn more about Cased:
{{- else }}

4. Learn more about Cased:
{{- end }}
   Website: https://cased.com
   Docs: https://docs.cased.com

Thank you for using Cased CD!
For support, visit https://github.com/cased/cased-cd/issues
